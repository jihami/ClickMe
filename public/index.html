<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MAIN_PAGE</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Gowun+Batang&family=Noto+Sans+KR&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/main.css">
  <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-storage.js"></script>
  <script>
    const firebaseConfig = {
      //  firebase sdk
      apiKey: "AIzaSyAScwaKmiKUyqgxaPBk2VUrydYSHUJF3pY",
      authDomain: "clickme-ca826.firebaseapp.com",
      projectId: "clickme-ca826",
      storageBucket: "clickme-ca826.appspot.com",
      messagingSenderId: "229716770871",
      appId: "1:229716770871:web:ba982b7fd732da3dd47fb2",
      measurementId: "G-KT1SPMPS2N"
    };

    firebase.initializeApp(firebaseConfig);

    const firebaseInstance = firebase;
    const authService = firebase.auth();
    const user = firebase.auth().currentUser;

    const githubLogin = async () => {
      const provider = new firebaseInstance.auth.GithubAuthProvider();
      const data = await authService.signInWithPopup(provider);

      document.getElementById('login').value = '00님'
      console.log(data)
      const username = data.additionalUserInfo.username
      console.log(username)
      const email = data.user.email
      console.log(email)
      const displayName = data.user.displayName
      console.log(displayName)
      document.getElementById('login').innerHTML = username+"님"
    }

    function githubLogOut() {
      firebase.auth().signOut().then(() => {
        // Sign-out successful.
        document.getElementById("login").innerHTML = "Git Hub Login"
      }).catch((error) => {
        // An error happened.
        console.log("logoutError")
      });
    }
  </script>
</head>
<body>
  <div>
    <img src="img/main_wave.png" style="width:100%; height:820px; float:left; position:absolute">

    <div id="head">
      <div id="logo" onclick="location.href='index.html'">
        <img src="img/logo.png" alt="logo">
      </div>

      <div id="user">
        <ul id="head_menu">
          <a href="#"><li id="login" onclick="githubLogin()">Git Hub Login</li></a>
          <a><li id="logout" onclick="githubLogOut()" style="display:none;">Logout</li></a>
        </ul>
      </div>
    </div>

    <div id="main">
      <p id="main_title">ClickMe</p>

      <div id="menu">
        <ul>
          <li id="lang"><a href="languages.html">LANG</a></li>
          <li id="stayus"><a href="stats.html">STAYUS</a></li>
          <li id="header"><a href="header.html">HEADER</a></li>
          <li id="badge"><a href="badge.html">BADGE</a></li>
        </ul>
      </div>
    </div>

    <div id="footer"></div>
  </div>
</body>
</html>
